{"ast":null,"code":"import _asyncToGenerator from \"C:/JOHN BRYCE/lessons/2021/07/16.07.21  \\u05DE\\u05D1\\u05D7\\u05DF/angularTask/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./api.service\";\nimport * as i2 from \"@angular/router\";\nexport class TasksService {\n  constructor(apiService, route, nav) {\n    this.apiService = apiService;\n    this.route = route;\n    this.nav = nav;\n    this._customersARR = [];\n    this._tasksARR = [];\n    this.result = {};\n    this._currentTask = {\n      Description: '',\n      CustomerID: 0\n    };\n  }\n\n  getCustomers(url) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this._customersARR = yield _this.apiService.createGetService(url);\n      console.log('_customersARR: ', _this._customersARR);\n\n      _this.getTasks('/tasks/getAllTasks');\n\n      _this.nav.navigate(['tasksList']);\n    })();\n  } // URL:   http://www.localhost:5004/customers/getAllCustomers\n\n\n  getTasks(url) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2._tasksARR = yield _this2.apiService.createGetService(url);\n      console.log('_tasksARR: ', _this2._tasksARR); // this.nav.navigate(['tasksList']);\n    })();\n  } // URL:   http://www.localhost:5004/tasks/getAllTasks\n\n\n  addTask(url) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this3._currentTask.Description === '' || _this3._currentTask.CustomerID === 0) {\n        alert('All fields must be provided');\n      } else {\n        let newTaskOB = {\n          Description: _this3._currentTask.Description,\n          CustomerID: _this3._currentTask.CustomerID\n        };\n        console.log('newTaskOB: ', newTaskOB);\n        _this3.result = yield _this3.apiService.createPostService(url, newTaskOB);\n        _this3._currentTask.Description = '';\n        _this3._currentTask.CustomerID = 0;\n\n        _this3.getTasks('/tasks/getAllTasks');\n\n        console.log('_tasksARR: ', _this3._tasksARR);\n\n        _this3.nav.navigate(['tasksList']);\n      }\n    })();\n  }\n\n}\n\nTasksService.ɵfac = function TasksService_Factory(t) {\n  return new (t || TasksService)(i0.ɵɵinject(i1.ApiService), i0.ɵɵinject(i2.ActivatedRoute), i0.ɵɵinject(i2.Router));\n};\n\nTasksService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: TasksService,\n  factory: TasksService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["C:\\JOHN BRYCE\\lessons\\2021\\07\\16.07.21  מבחן\\angularTask\\client\\src\\app\\services\\tasks.service.ts"],"names":[],"mappings":";;;;AAQA,OAAM,MAAO,YAAP,CAAmB;AASvB,EAAA,WAAA,CACS,UADT,EAES,KAFT,EAGS,GAHT,EAGoB;AAFX,SAAA,UAAA,GAAA,UAAA;AACA,SAAA,KAAA,GAAA,KAAA;AACA,SAAA,GAAA,GAAA,GAAA;AAXT,SAAA,aAAA,GAAiC,EAAjC;AACA,SAAA,SAAA,GAAyB,EAAzB;AACA,SAAA,MAAA,GAAc,EAAd;AAEA,SAAA,YAAA,GAAoB;AAClB,MAAA,WAAW,EAAE,EADK;AAElB,MAAA,UAAU,EAAE;AAFM,KAApB;AAQI;;AACE,EAAA,YAAY,CAAC,GAAD,EAAY;AAAA;;AAAA;AAC5B,MAAA,KAAI,CAAC,aAAL,SAA4B,KAAI,CAAC,UAAL,CAAgB,gBAAhB,CAC1B,GAD0B,CAA5B;AAGA,MAAA,OAAO,CAAC,GAAR,CAAY,iBAAZ,EAA+B,KAAI,CAAC,aAApC;;AACA,MAAA,KAAI,CAAC,QAAL,CAAc,oBAAd;;AACA,MAAA,KAAI,CAAC,GAAL,CAAS,QAAT,CAAkB,CAAC,WAAD,CAAlB;AAN4B;AAO7B,GArBsB,CAsBvB;;;AAEM,EAAA,QAAQ,CAAC,GAAD,EAAY;AAAA;;AAAA;AACxB,MAAA,MAAI,CAAC,SAAL,SAAwB,MAAI,CAAC,UAAL,CAAgB,gBAAhB,CACtB,GADsB,CAAxB;AAGA,MAAA,OAAO,CAAC,GAAR,CAAY,aAAZ,EAA2B,MAAI,CAAC,SAAhC,EAJwB,CAKxB;AALwB;AAMzB,GA9BsB,CA+BvB;;;AAEM,EAAA,OAAO,CAAC,GAAD,EAAY;AAAA;;AAAA;AACvB,UACE,MAAI,CAAC,YAAL,CAAkB,WAAlB,KAAkC,EAAlC,IACA,MAAI,CAAC,YAAL,CAAkB,UAAlB,KAAiC,CAFnC,EAGE;AACA,QAAA,KAAK,CAAC,6BAAD,CAAL;AACD,OALD,MAKO;AACL,YAAI,SAAS,GAAG;AACd,UAAA,WAAW,EAAE,MAAI,CAAC,YAAL,CAAkB,WADjB;AAEd,UAAA,UAAU,EAAE,MAAI,CAAC,YAAL,CAAkB;AAFhB,SAAhB;AAKA,QAAA,OAAO,CAAC,GAAR,CAAY,aAAZ,EAA2B,SAA3B;AACA,QAAA,MAAI,CAAC,MAAL,SAAqB,MAAI,CAAC,UAAL,CAAgB,iBAAhB,CACnB,GADmB,EAEnB,SAFmB,CAArB;AAIA,QAAA,MAAI,CAAC,YAAL,CAAkB,WAAlB,GAAgC,EAAhC;AACA,QAAA,MAAI,CAAC,YAAL,CAAkB,UAAlB,GAA+B,CAA/B;;AAEA,QAAA,MAAI,CAAC,QAAL,CAAc,oBAAd;;AACA,QAAA,OAAO,CAAC,GAAR,CAAY,aAAZ,EAA2B,MAAI,CAAC,SAAhC;;AACA,QAAA,MAAI,CAAC,GAAL,CAAS,QAAT,CAAkB,CAAC,WAAD,CAAlB;AACD;AAvBsB;AAwBxB;;AAzDsB;;;mBAAZ,Y,EAAY,EAAA,CAAA,QAAA,CAAA,EAAA,CAAA,UAAA,C,EAAA,EAAA,CAAA,QAAA,CAAA,EAAA,CAAA,cAAA,C,EAAA,EAAA,CAAA,QAAA,CAAA,EAAA,CAAA,MAAA,C;AAAA,C;;;SAAZ,Y;AAAY,EAAA,OAAA,EAAZ,YAAY,CAAA,I;AAAA,EAAA,UAAA,EAFX","sourcesContent":["import { Injectable } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Customer, Task } from '../models/models';\nimport { ApiService } from './api.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class TasksService {\n  _customersARR: Array<Customer> = [];\n  _tasksARR: Array<Task> = [];\n  result: any = {};\n\n  _currentTask: any = {\n    Description: '',\n    CustomerID: 0,\n  };\n  constructor(\n    public apiService: ApiService,\n    public route: ActivatedRoute,\n    public nav: Router\n  ) {}\n  async getCustomers(url: string) {\n    this._customersARR = (await this.apiService.createGetService(\n      url\n    )) as Array<Customer>;\n    console.log('_customersARR: ', this._customersARR);\n    this.getTasks('/tasks/getAllTasks');\n    this.nav.navigate(['tasksList']);\n  }\n  // URL:   http://www.localhost:5004/customers/getAllCustomers\n\n  async getTasks(url: string) {\n    this._tasksARR = (await this.apiService.createGetService(\n      url\n    )) as Array<Task>;\n    console.log('_tasksARR: ', this._tasksARR);\n    // this.nav.navigate(['tasksList']);\n  }\n  // URL:   http://www.localhost:5004/tasks/getAllTasks\n\n  async addTask(url: string) {\n    if (\n      this._currentTask.Description === '' ||\n      this._currentTask.CustomerID === 0\n    ) {\n      alert('All fields must be provided');\n    } else {\n      let newTaskOB = {\n        Description: this._currentTask.Description,\n        CustomerID: this._currentTask.CustomerID,\n      };\n\n      console.log('newTaskOB: ', newTaskOB);\n      this.result = (await this.apiService.createPostService(\n        url,\n        newTaskOB\n      )) as any;\n      this._currentTask.Description = '';\n      this._currentTask.CustomerID = 0;\n\n      this.getTasks('/tasks/getAllTasks');\n      console.log('_tasksARR: ', this._tasksARR);\n      this.nav.navigate(['tasksList']);\n    }\n  }\n  // URL:   http://www.localhost:5004/tasks/insertNewTask\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}